---
layout:     post
title:      "MMDç»‘éª¨éª¼æ³¨æ„äº‹é¡¹"
---


> mmdçš„éª¨éª¼å¿…é¡»åå­—è¦å¯¹ï¼Œä¸å¯¹çš„è¯å¯¼å‡ºçš„åŠ¨ç”»æ˜¯ä¸ä¼šæ’­æ”¾çš„ã€‚
> æ³¨æ„ï¼Œå‘½åçš„æ—¶å€™ä¸è¦å¤åˆ¶excelè¡¨æ ¼é‡Œçš„æ–‡å­—ï¼Œå› ä¸ºä¼šå¸¦ä¸Šåˆ¶è¡¨ç¬¦ï¼Œå›è½¦å•¥çš„ï¼Œä»è€Œå¯¼è‡´å¯¼å‡ºæœ‰é—®é¢˜
> å¯¼å…¥fbxçš„æ—¶å€™ï¼Œéœ€è¦å…ˆå¯¼å‡ºä¸ºbvhæ ¼å¼å†å¯¼å…¥
> å¯¼å‡ºçš„æ—¶å€™éœ€è¦å‹¾é€‰Treat current pose as Rest Pose
> å¯¼å‡ºvmdå‰éœ€è¦å…ˆè®¾ç½®æˆA pose

## åŸºæœ¬æµç¨‹

- Blenderå…ˆç»‘å®šåŸºç¡€éª¨éª¼
    - å¯ä»¥å‚ç…§mmdè‡ªå¸¦çš„æ¨¡å‹æ·»åŠ åŸºç¡€éª¨éª¼å’ŒIK
    - è‡ªåŠ¨æƒé‡
    - å…³èŠ‚åŒºåŸŸåŠ å¾ªç¯è¾¹
    - æ‰‹åŠ¨ä¿®æ”¹æƒé‡
    - A-pose
- Pmxeditorå¤„ç†
    - ç”¨æ’ä»¶æ·»åŠ  å‡†æ ‡å‡†éª¨éª¼(æ©éª¨ã€è‚©På•¥çš„)(SemiStandardBones)
    - æ³¨æ„æ·»åŠ -180~-0.5çš„è§’åº¦é™åˆ¶
    - è¿˜æœ‰IKéª¨éª¼loop,å•ä½è§’?

## ç‰©ä½“çš„ç¼©æ”¾
- å¯¼å…¥blenderä¸€èˆ¬éœ€è¦8å€ï¼Œæˆ–è€…0.13å€çš„ç¼©æ”¾
- å¯¼å…¥çš„fbxæ—¶å€™è¦å‹¾é€‰'è‡ªåŠ¨è®¾ç½®boneæ–¹å‘'
- å†Objectæ¨¡å¼ç¼©æ”¾çš„æ—¶å€™è®°å¾—è¦apply(to deltaæœ‰å¦™ç”¨)

## è„šéƒ¨éª¨éª¼é™·å…¥åœ°é¢çš„é—®é¢˜
- é¦–å…ˆæ¨¡å‹éœ€è¦æœ‰ å³ã¤ã¾å…ˆ/å·¦ã¤ã¾å…ˆ è¿™ä¸¤ä¸ªéª¨éª¼
- mmdçš„æ¨¡å‹æœ‰ä¸¥æ ¼çš„é¡ºåºï¼Œçˆ¶éª¨éª¼å¿…é¡»åœ¨å­éª¨éª¼å‰é¢ï¼Œå¦‚æœé‡åˆ°æ ‡çº¢è‰²çš„çˆ¶éª¨éª¼ï¼Œè¯·åœ¨pmxé‡Œæ”¹ä¸‹ä½ç½®

## æ‰‹éƒ¨éª¨éª¼åŠ¨ä½œä¸å‡†ç¡®çš„é—®é¢˜
- æ³¨æ„æ¨¡å‹çš„åˆå§‹çŠ¶æ€å¿…é¡»ä¸º37åº¦A-pose,å¦‚æœæ˜¯T-pose,è¯·æ”¹ä¸ºA-pose,å› ä¸ºå¤§å¤šæ•°åŠ¨ä½œéƒ½æ˜¯æŒ‰ç…§A-poseæ¥Kçš„
- blenderé‡Œé‡ç½®ä¸ºA-poseçš„æ—¶å€™éœ€è¦åˆ°ä¿®æ”¹å™¨é‡ŒApplyä¸€ä¸‹,å¦åˆ™ä¸ä¼šç”Ÿæ•ˆ

## é‡å‘½åè„šæœ¬

```python
import bpy
prefix_str = "mixamorig:" 
for x in bpy.context.object.data.bones:
    x.name = x.name.replace(prefix_str + 'Hips','ã‚»ãƒ³ã‚¿ãƒ¼')
    x.name = x.name.replace(prefix_str + 'Spine2','ä¸ŠåŠèº«ï¼’')
    x.name = x.name.replace(prefix_str + 'Spine','ä¸ŠåŠèº«')
    x.name = x.name.replace(prefix_str + 'LeftShoulder','å·¦è‚©')
    x.name = x.name.replace(prefix_str + 'LeftArm','å·¦è…•')
    x.name = x.name.replace(prefix_str + 'LeftForeArm','å·¦ã²ã˜')
    x.name = x.name.replace(prefix_str + 'RightShoulder','å³è‚©')
    x.name = x.name.replace(prefix_str + 'RightArm','å³è…•')
    x.name = x.name.replace(prefix_str + 'RightForeArm','å³ã²ã˜')
    x.name = x.name.replace(prefix_str + 'RightLeg','å³ã²ã–')
    x.name = x.name.replace(prefix_str + 'LeftLeg','å·¦ã²ã–')
    x.name = x.name.replace(prefix_str + 'RightHand','å³æ‰‹é¦–')
    x.name = x.name.replace(prefix_str + 'LeftHand','å·¦æ‰‹é¦–')
    x.name = x.name.replace(prefix_str + 'RightUpLeg','å³è¶³')
    x.name = x.name.replace(prefix_str + 'LeftUpLeg','å·¦è¶³')
    x.name = x.name.replace(prefix_str + 'RightFoot','å³è¶³é¦–')
    x.name = x.name.replace(prefix_str + 'LeftFoot','å·¦è¶³é¦–')
    x.name = x.name.replace(prefix_str + 'Neck','é¦–')
    x.name = x.name.replace(prefix_str + 'Head','é ­')
    
```

## é•œåƒæ”¹å

ctrl + mä¹‹å

```python
import bpy
for x in bpy.context.object.data.bones:
    if x.name.find('.001') > 0:
        x.name = x.name.replace('å·¦','å³')
        x.name = x.name.replace('.001','')  
```

## å¯¼å…¥æŒ‡å®šæ–‡ä»¶å¤¹æ–‡ä»¶

```python
import os
import bpy

# put the location to the folder where the objs are located here in this fashion
path_to_obj_dir = os.path.join('C:\\', 'Users', 'you login name', 'Desktop', 'ss') #<-WINDOWS_OS
#path_to_obj_dir = bpy.path.abspath('//OBJ/')

# get list of all files in directory
file_list = sorted(os.listdir(path_to_obj_dir))

# get a list of files ending in 'obj'
obj_list = [item for item in file_list if item[-3:] == 'pmx']

# loop through the strings in obj_list and add the files to the scene
for item in obj_list:
    path_to_file = os.path.join(path_to_obj_dir, item)
    bpy.ops.mmd_tools.import_model(filepath=path_to_file)
```

## Blenderå¯¼å‡ºfbxåŠ¨ä½œæœ‰å¤§å¹…åº¦é£˜ç§»

- å¯¼å‡ºPMX ç”¨PEæ‰“å¼€ï¼Œæ£€æŸ¥å¹¶æ’åºéª¨éª¼
- ç”¨æ’ä»¶æ·»åŠ æ¬¡æ ‡å‡†ï¼Œå¯¼å‡ºPMX
- å†å¯¼å…¥Blenderï¼Œå¯¼å…¥VMDå†å¯¼å‡ºå°±å¥½äº†
- åŸå› ä¸æ¸…æ¥šğŸ˜œ
- æˆ–è€…å†åŸæœ‰åŸºç¡€ä¸Šï¼ŒåŠ ä¸Šgroove ã€è…° éª¨éª¼ä¹Ÿè¡Œ
